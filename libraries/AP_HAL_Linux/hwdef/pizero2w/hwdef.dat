# Raspberry Pi Zero 2W board definition
# Minimal configuration for CRSF External AHRS testing

define CONFIG_HAL_BOARD_SUBTYPE HAL_BOARD_SUBTYPE_LINUX_RPI

# Toolchain - 64-bit ARM for Pi Zero 2W (BCM2710/Cortex-A53)
env TOOLCHAIN aarch64-linux-gnu

# Optimizations for Cortex-A53 (64-bit)
env OPTIMIZE -mcpu=cortex-a53 -fomit-frame-pointer -ftree-vectorize

# GPIO support - enables DMA-based GPIO sampling for SBUS
define HAL_LINUX_GPIO_RPI_ENABLED 1

# Enable CRSF output - key feature for this branch
define AP_CRSF_OUT_ENABLED 1

# No onboard IMU - using External AHRS
define HAL_INS_DEFAULT HAL_INS_NONE

# Directories
define HAL_BOARD_STORAGE_DIRECTORY "/var/lib/ardupilot"
define HAL_BOARD_LOG_DIRECTORY "/var/lib/ardupilot/logs"
define HAL_BOARD_TERRAIN_DIRECTORY "/var/lib/ardupilot/terrain"

# Serial port configuration
# UART0 (GPIO14/15) available on Pi Zero 2W GPIO header
# UART configuration handled at runtime via SERIALn parameters

define HAL_BARO_ALLOW_INIT_NO_BARO 1

# Enable Serial LED (NeoPixel/WS2812) support via SPI
define HAL_LINUX_SERIALLED_ENABLED 1

# Default NeoPixel channel mask - enables channel 0 without servo function assignment
define AP_NOTIFY_NEOPIXEL_MASK 1
