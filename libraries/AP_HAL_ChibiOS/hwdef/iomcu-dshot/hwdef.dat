# hw definition file for processing by chibios_pins.py

include ../iomcu/hwdef.dat

undef AP_FASTBOOT_ENABLED AP_BOOTLOADER_FLASHING_ENABLED 
undef HAL_ENABLE_DSHOT HAL_NO_RCOUT_THREAD

# PPM uses a DMA channel that is required for TIM2, and no remapping of PA8 is possible
undef PA8
undef STM32_ICU_USE_TIM1 RCIN_ICU_TIMER STM32_RCIN_DMA_STREAM HAL_USE_ICU

define HAL_NO_LED_THREAD 1

# TIM2_UP required for PWM1/2
define STM32_TIM_TIM2_UP_DMA_STREAM STM32_DMA_STREAM_ID(1, 2)
define STM32_TIM_TIM2_UP_DMA_CHAN 1

# TIM4_UP (PWM 3/4) cannot be used as channels used by high speed USART2 RX/TX
# It's possible that DMA sharing might make this workable
#define STM32_TIM_TIM4_UP_DMA_STREAM STM32_DMA_STREAM_ID(1, 7)
#define STM32_TIM_TIM4_UP_DMA_CHAN 1

# TIM3_UP required for PWM5-8
define STM32_TIM_TIM3_UP_DMA_STREAM STM32_DMA_STREAM_ID(1, 3)
define STM32_TIM_TIM3_UP_DMA_CHAN 1

define NO_FASTBOOT
define HAL_WITH_DSP FALSE
define HAL_ENABLE_DSHOT TRUE
define HAL_RCOUTSERIAL_ENABLED FALSE
define HAL_SERIALLED_ENABLED FALSE

undef AP_RCPROTOCOL_IBUS_ENABLED AP_RCPROTOCOL_SRXL_ENABLED AP_RCPROTOCOL_ST24_ENABLED
define AP_RCPROTOCOL_IBUS_ENABLED 0
define AP_RCPROTOCOL_SRXL_ENABLED 0
define AP_RCPROTOCOL_ST24_ENABLED 0
